package blackjack21;

/*
 * Author: Troy Aiken
 * Class: Introduction to Programming
 * Date: 01/08/2020
 */

import java.util.Scanner;
public class Blackjack21 {
	public static void main(String[] args) {
		boolean flag = true;
		Scanner input = new Scanner(System.in);
		//create Deck
		String[] deck = {"Ace of Spades", "2 of Spades", "3 of Spades", "4 of Spades", "5 of Spades", "6 of Spades", "7 of Spades", "8 of Spades", "9 of Spades", "10 of Spades", "Jack of Spades", "Queen of Spades", "King of Spades", 
				"Ace of Hearts", "2 of Hearts", "3 of Hearts", "4 of Hearts", "5 of Hearts", "6 of Hearts", "7 of Hearts", "8 of Hearts", "9 of Hearts", "10 of Hearts", "Jack of Hearts", "Queen of Hearts", "King of Hearts", 
				"Ace of Diamonds", "2 of Diamonds", "3 of Diamonds", "4 of Diamonds", "5 of Diamonds", "6 of Diamonds", "7 of Diamonds", "8 of Diamonds", "9 of Diamonds", "10 of Diamonds", "Jack of Diamonds", "Queen of Diamonds", "King of Diamonds", 
				"Ace of Clubs", "2 of Clubs", "3 of Clubs", "4 of Clubs", "5 of Clubs", "6 of Clubs", "7 of Clubs", "8 of Clubs", "9 of Clubs", "10 of Clubs", "Jack of Clubs", "Queen of Clubs", "King of Clubs"};

		int card = 0;
		int pcount = 0;
		int dcount = 0;
		double pool = 0;
		double funds = 100;
		while (flag = true) {
			//shuffle deck, card values for shuffled deck, player and dealer hands.
			String[] shuffledDeck = shuffleDeck(deck);
			int[] cardValue = getCardValue(shuffledDeck);
			String[] playersHand = new String[pcount + 1];
			String[] dealersHand = new String[dcount + 1];
			int[] playerHandTotal = new int[pcount + 1];
			int[]dealerHandTotal = new int[dcount + 1];
			String[] tempcard = new String[1];
			int[] tempvar = new int[1];

			for (int f = 0; f < shuffledDeck.length; f++) {
				System.out.print("deck: " + shuffledDeck[f] + ", ");
			}
			//begin play

			System.out.println("Player Funds: $" + funds);
			System.out.println("Place a bet. Maximum bet is $" + funds);
			int bet = input.nextInt();
			pool = bet;
			funds = funds - bet;
			// deal first cards
			for (int i = 0; i < 2; i++) {
				playersHand[i] = shuffledDeck[card];
				playerHandTotal[i] = cardValue[card];
				card++;
				pcount++;
				dealersHand[i] = shuffledDeck[card];
				dealerHandTotal[i] = cardValue[card];
				card++;
				dcount++;
			}
			//check dealers hand for Ace and swap to position 0
			int dealertotal = dealerTotal(dealerHandTotal);
			int playertotal = playerTotal(playerHandTotal);
			if (dealersHand[1].contains("Ace")) {
				tempcard[0] = dealersHand[1];
				dealersHand[1] = dealersHand[0];
				dealersHand[0] = tempcard[0];	
				//swap ace value to first position
				tempvar[0] = dealerHandTotal[1];
				dealerHandTotal[1] = dealerHandTotal[0];
				dealerHandTotal[0] = tempvar[0];
			}

			//print player's hand and dealer's hand
			System.out.println("							Pool: $" + pool);
			System.out.println("							Player Funds: $" + funds);	
			System.out.println("Dealer's Hand: Unknown, " + dealersHand[1]);
			System.out.println();
			System.out.print("Player's Hand: ");
			for (int j = 0; j < pcount; j++) {
				System.out.print(playersHand[j] + ", ");
			}
			System.out.println();
			System.out.println("Player Total: " + playertotal);
			if (playertotal < 21) {
				System.out.println("Double your bet and draw a card? (Y/N)");
				String doubleBet = input.next();
				if(doubleBet.equalsIgnoreCase("y")) {
					funds = funds + pool;
					pool = 0;
					bet = bet * 2;
					pool = bet;
					funds = funds - bet;
					//double bet and draw a card
					playersHand[pcount] = shuffledDeck[card];
					playerHandTotal[pcount] = cardValue[card];
					card++;
					pcount++;		
				}
				else {
					playertotal =  playerTotal(playerHandTotal);
					while (playertotal < 21) {
						System.out.println("Draw a card? (Y/N)");
						String drawcard = input.next();
						if (drawcard.equalsIgnoreCase("y")) {
							playersHand[pcount] = shuffledDeck[card];
							playerHandTotal[pcount] = cardValue[card];
							card++;
							pcount++;
							playertotal =  playerTotal(playerHandTotal);
						}
						else {
							playertotal =  playerTotal(playerHandTotal);
							break;
						}
					}
				}
			}

			System.out.println("							Pool: $" + pool);
			System.out.println("							Player Funds: $" + funds);	
			System.out.println("Dealer's Hand: Unknown, " + dealersHand[1]);
			System.out.print("Player's Hand: ");
			for (int j = 0; j < pcount; j++) {
				System.out.print(playersHand[j] + ", ");				
			}
			System.out.println();
			System.out.println("Player's total: " + playertotal);

			if (playertotal < 21) {
				playersHand[pcount - 1] = shuffledDeck[card];
				playerHandTotal[pcount - 1] = cardValue[card];
				card++;
				pcount++;
			}
			System.out.println();
			while (checkDealerTotal(dealertotal) == true) {
				dealersHand[dcount - 1] = shuffledDeck[card];
				dealerHandTotal[dcount - 1] = cardValue[card];
				card++;
				dcount++;
				if (dealersHand[0].contains("Ace")) {
					dealertotal = dealerTotal(dealerHandTotal);
					if(dealertotal > 21) {
						dealerHandTotal[0] = 1;
					}
				}
			}
			System.out.println("Dealer's Hand: ");
			for (int a = 0; a < dcount; a++) {
				System.out.print(dealersHand[a] + ", ");
			}	
			System.out.print("Dealer's Total: " + dealertotal);
			System.out.println();
			System.out.print("Player's Hand: ");
			for (int j = 0; j < pcount; j++) {
				System.out.print(playersHand[j] + ", ");
				if (isWinner(playertotal, dealertotal) == true) {
					funds = funds + (pool * 1.5);
					pool = 0;
					System.out.println("Player funds: $" + funds);
					System.out.println("Congratulations! You win! \nPlay Again? (Y/N)");
					String play = input.next();
					if (play.equalsIgnoreCase("y")){
						flag = true;
					}
					else {
						flag = false;
					}				

				}
				else {
					pool = 0;
					System.out.println("Sorry, you loose. Play Again? (Y/N)");
					String play = input.next();
					if (play.equalsIgnoreCase("y")){
						flag = true;
					}
					else {
						flag = false;
					}				
				}
			}				
		}
	}

	/**
	 * This method checks the total card value of the player's hand.
	 * @param playerHandTotal is the Array of the value of the player's hand.
	 * @return total value of the player's hand
	 */
	public static int playerTotal(int[] playerHandTotal) {
		int temp = 0;
		int var = 0;
		for (int i =0; i < playerHandTotal.length; i++) {
			int playertotal = playerHandTotal[i];
			temp = var + playertotal;
			var = temp;				
		}
		return var;
	}
	/**
	 * This Method gets the total card value of the dealer's hand.
	 * @param dealerHandTotal is the Array of the value of the dealer's hand
	 * @return total value of the dealer's hand
	 */
	public static int dealerTotal(int[] dealerHandTotal) {
		int temp = 0;
		int var = 0;
		for (int i = 0; i < dealerHandTotal.length; i++) {
			int dealertotal = dealerHandTotal[i];
			temp = var + dealertotal;
			var = temp;

		}
		return var;
	}
	/**
	 * This method checks the total of the dealer's hand
	 * @param dealertotal is the total card value of the dealer's hand.
	 * @return when true the dealer draws a card.
	 */
	public static Boolean checkDealerTotal(int dealertotal) {
		boolean flag = false;
		if (dealertotal <= 17) {
			flag = true;
		}
		else {
			flag = false;
		}
		return flag;
	}
	/**
	 * This Method compares the totals of the player's hand and the dealer's hand.
	 * @param x uses the playertotal to compare with dealertotal
	 * @param y dealer total
	 * @return if it returns true player wins, if false player looses.
	 */
	public static Boolean isWinner(int x, int y) {
		boolean flag = false;
		if (x == 21 && y != 21) {
			flag = true;
		}
		if (x > 21) {
			flag = false;
		}
		if (x > y) {
			flag = true;
		}
		if (x == y) {
			flag = true;
		}
		return flag;
	}
	/**
	 * This Method fills the Array shuffledDeck with a random card from the array Deck.
	 * @param deck a deck of 52 cards in order from Ace to King.
	 * @return fills the Array shuffledDeck without copies
	 */
	public static String[] shuffleDeck(String[] deck) {
		boolean flag = false;
		String[] shuffledDeck = new String[52];	
		for (int i = 0; i < deck.length; i++){
			int index = (int)(Math.random() * deck.length);

			for (int a = 0; a < deck.length; a++){
				for (int b = 0; b < deck.length; b++){
					if (deck[a] == shuffledDeck[b]){
						flag = true;
					}
					if (!flag){
						shuffledDeck[i] = deck[index];
					}
					else{
						flag = false;
					}
				}
			}
		}			
		return shuffledDeck;
	}
	/**
	public static String[] split(String[] shuffledDeck) {
		Scanner input = new Scanner(System.in);
		String[] playerhand1 = shuffledDeck[0] + drawCard(4);
		String[] playerhand2 =  shuffledDeck[2] + drawCard(5);
		System.out.println("Player's hand 1: " + playerhand1);
		System.out.println("Player's hand 2: "+ playerhand2);
	}**/

	/**
	 * This Method fills an array at cardValue with the values presented with the shuffledDeck array.
	 * @param shuffledDeck Uses the Array shuffledDeck
	 * @return returns the value of each card from shuffledDeck to the Array cardValue. 
	 */
	public static int[] getCardValue(String[] shuffledDeck) {

		int[] cardValue = new int[52];
		for (int i = 0; i < 52; i++) {

			if (shuffledDeck[i].contains("King")) {
				cardValue[i] = 10;
			}
			else if (shuffledDeck[i].contains("Queen")) {
				cardValue[i] = 10;
			}
			else if (shuffledDeck[i].contains("Jack")) {
				cardValue[i] = 10;
			}
			else if (shuffledDeck[i].contains("10")) {
				cardValue[i] = 10;
			}
			else if (shuffledDeck[i].contains("9")) {
				cardValue[i] = 9;
			}
			else if (shuffledDeck[i].contains("8")) {
				cardValue[i] = 8;
			}
			else if (shuffledDeck[i].contains("7")) {
				cardValue[i] = 7;

			}
			else if (shuffledDeck[i].contains("6")) {
				cardValue[i] = 6;

			}
			else if (shuffledDeck[i].contains("5")) {
				cardValue[i] = 5;

			}
			else if (shuffledDeck[i].contains("4")) {
				cardValue[i] = 4;

			}
			else if (shuffledDeck[i].contains("3")) {
				cardValue[i] = 3;

			}
			else if (shuffledDeck[i].contains("2")) {
				cardValue[i] = 2;

			}
			else {
				cardValue[i] = 11;

			}	
		}
		return cardValue;
	}
}
